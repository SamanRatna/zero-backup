<!-- <!DOCTYPE html> -->
<html>
<head>
    <meta charset="utf-8"/>

    <!-- Script to load Chart.js from the cloud -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.bundle.min.js'></script>


</head>


<body>
  <center>
    <canvas id="myChart" width='500' height='500'></canvas>

    <!-- Script to plot and update chart in real time-->
    <script>
        // Plot chart
        var ctx = document.getElementById('myChart');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'X',
                    data: [],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.0)',
                        'rgba(54, 162, 235, 0.0)',
                        'rgba(255, 206, 86, 0.0)',
                        'rgba(75, 192, 192, 0.0)',
                        'rgba(153, 102, 255, 0.0)',
                        'rgba(255, 159, 64, 0.0)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                       animation: {
                           duration: 0
                       },
                       responsive: false,
                       scales: {
                           yAxes: [{
                               display: false,
                               ticks: {
                                   beginAtZero: true,
                                   max: 25,
                                   display: false
                               },
                               gridLines: {
                                   display: false
                               }
                           }],
                           xAxes: [{
                               display: false,
                               ticks: {
                                   display: false
                               },
                               gridLines: {
                                   display: false
                               }
                           }]
                       },
                       legend: {
                           display: false
                       },
                       tooltips: {
                           enabled: false
                       }
                   }
        });

        // Initialize variables
        x_data = 0;
        y_data = 0;

        // Define function to get data and update chart
        var getData = function(){
            // Setup ajax request and get data as 'response'
            xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function(){
                if (this.readyState == 4 && this.status == 200) {
                    response = JSON.parse(xhttp.responseText);
                    y_data = response.x;
                    console.log(y_data);

                }
            };

            // Load data
            xhttp.open("GET", "x_data.json", true)
            xhttp.send();

            // Update chart
            myChart.data.labels.push(x_data++)
            myChart.data.datasets[0].data.push(y_data)

            if (myChart.data.labels.length>=100){
                myChart.data.labels.splice(0, 1)
                myChart.data.datasets[0].data.splice(0, 1)
            }
            myChart.update();
        }

        // Run getData at a certain time interval
        setInterval(getData, 20)
    </script>
    <h1> GRAPH </h1>
  </center>
</body>


</html>
